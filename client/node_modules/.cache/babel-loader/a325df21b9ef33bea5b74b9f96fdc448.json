{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Project\\\\client\\\\src\\\\components\\\\booking\\\\Booking.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport DateRangePicker from \"react-bootstrap-daterangepicker\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { getRangeOfDates, dateToUTC } from \"../../helpers\";\nimport BookingModal from \"./BookingModal\";\n\nclass Booking extends Component {\n  constructor(props) {\n    super(props);\n    this.dateRef = /*#__PURE__*/React.createRef();\n    this.bookedOutDates = [];\n    this.state = {\n      startAt: \"\",\n      endAt: \"\",\n      guests: \"\",\n      openModal: false\n    };\n    this.checkInvalidDate = this.checkInvalidDate.bind(this);\n    this.handleApply = this.handleApply.bind(this);\n    this.closeConfirmation = this.closeConfirmation.bind(this);\n    this.onSuccessfulBooking = this.onSuccessfulBooking.bind(this);\n  }\n\n  componentDidMount() {\n    this.bookedOutDates = this.getBookedOutDates();\n  }\n\n  getBookedOutDates() {\n    const offDaysArr = [];\n    const {\n      bookings\n    } = this.props.rental;\n\n    if (bookings && bookings.length > 0) {\n      bookings.forEach(booking => {\n        const bookedInterval = getRangeOfDates(booking.startAt, booking.endAt);\n        offDaysArr.push(...bookedInterval);\n      });\n    }\n\n    return offDaysArr;\n  }\n\n  checkInvalidDate(date) {\n    return this.bookedOutDates.includes(date.format(\"DD/MM/Y\")) || date.diff(moment(), \"days\") < 0;\n  }\n\n  handleApply(event, picker) {\n    //prevent saving date as a previous day in a database by applying utc to date in a string form\n    const sStartDate = picker.startDate.format(\"DD/MM/Y\");\n    const sEndDate = picker.endDate.format(\"DD/MM/Y\");\n    const startAt = dateToUTC(sStartDate);\n    const endAt = dateToUTC(sEndDate);\n    this.dateRef.current.value = `${sStartDate} to ${sEndDate}`;\n    this.setState({\n      startAt,\n      endAt\n    });\n  }\n\n  addGuests(event) {\n    this.setState({\n      guests: parseInt(event.target.value, 10)\n    });\n  }\n\n  confirmReservation() {\n    this.setState({\n      openModal: true\n    });\n  }\n\n  closeConfirmation() {\n    this.setState({\n      openModal: false\n    });\n    this.resetData();\n  }\n\n  resetData() {\n    this.dateRef.current.value = \"\";\n    this.setState({\n      starttAt: \"\",\n      endAt: \"\",\n      guests: \"\"\n    });\n  }\n\n  onSuccessfulBooking() {\n    const {\n      startAt,\n      endAt\n    } = this.state;\n    const bookedInterval = getRangeOfDates(startAt, endAt);\n    this.bookedOutDates.push(...bookedInterval);\n    this.closeConfirmation();\n    toast.success(\"Booking has been successfuly created!\");\n  }\n\n  render() {\n    const {\n      rental,\n      isAuth\n    } = this.props;\n    const {\n      startAt,\n      endAt,\n      guests,\n      openModal\n    } = this.state;\n    const days = getRangeOfDates(startAt, endAt).length - 1;\n    const totalPrice = rental.dailyRate * days;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking\",\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"booking-price\",\n        children: [\"$ \", rental.dailyRate, /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"booking-per-night\",\n          children: \"per night\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), !isAuth && /*#__PURE__*/_jsxDEV(Link, {\n        className: \"btn btn-bwm btn-confirm btn-block\",\n        to: {\n          pathname: \"/login\"\n        },\n        children: \"Login to book a place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this), isAuth && /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"dates\",\n            children: \"Dates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DateRangePicker, {\n            onApply: this.handleApply,\n            isInvalidDate: this.checkInvalidDate,\n            opens: \"left\",\n            containerStyles: {\n              display: \"block\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: this.dateRef,\n              id: \"dates\",\n              type: \"text\",\n              className: \"form-control\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"guests\",\n            children: \"Guests\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: event => this.addGuests(event),\n            value: this.state.guests,\n            type: \"number\",\n            className: \"form-control\",\n            id: \"guests\",\n            \"aria-describedby\": \"emailHelp\",\n            placeholder: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: !startAt || !endAt || !guests,\n          onClick: () => this.confirmReservation(),\n          className: \"btn btn-bwm btn-confirm btn-block\",\n          children: \"Reserve place now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"booking-note-title\",\n        children: \"People are interested into this house\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"booking-note-text\",\n        children: \"More than 500 people checked this rental in last month.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BookingModal, {\n        startAt: startAt,\n        endAt: endAt,\n        days: days,\n        guests: guests,\n        dailyRate: rental.dailyRate,\n        totalPrice: totalPrice,\n        rentalId: rental._id,\n        open: openModal,\n        closeModal: this.closeConfirmation,\n        onBooked: this.onSuccessfulBooking\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    rental: state.rental.data,\n    isAuth: state.auth.isAuth\n  };\n};\n\nexport default connect(mapStateToProps)(Booking);","map":{"version":3,"sources":["C:/Users/ASUS/Project/client/src/components/booking/Booking.js"],"names":["React","Component","connect","Link","moment","DateRangePicker","ToastContainer","toast","getRangeOfDates","dateToUTC","BookingModal","Booking","constructor","props","dateRef","createRef","bookedOutDates","state","startAt","endAt","guests","openModal","checkInvalidDate","bind","handleApply","closeConfirmation","onSuccessfulBooking","componentDidMount","getBookedOutDates","offDaysArr","bookings","rental","length","forEach","booking","bookedInterval","push","date","includes","format","diff","event","picker","sStartDate","startDate","sEndDate","endDate","current","value","setState","addGuests","parseInt","target","confirmReservation","resetData","starttAt","success","render","isAuth","days","totalPrice","dailyRate","pathname","display","_id","mapStateToProps","data","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nimport DateRangePicker from \"react-bootstrap-daterangepicker\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { getRangeOfDates, dateToUTC } from \"../../helpers\";\nimport BookingModal from \"./BookingModal\";\n\nclass Booking extends Component {\n  constructor(props) {\n    super(props);\n\n    this.dateRef = React.createRef();\n    this.bookedOutDates = [];\n\n    this.state = {\n      startAt: \"\",\n      endAt: \"\",\n      guests: \"\",\n      openModal: false\n    };\n\n    this.checkInvalidDate = this.checkInvalidDate.bind(this);\n    this.handleApply = this.handleApply.bind(this);\n    this.closeConfirmation = this.closeConfirmation.bind(this);\n    this.onSuccessfulBooking = this.onSuccessfulBooking.bind(this);\n  }\n\n  componentDidMount() {\n    this.bookedOutDates = this.getBookedOutDates();\n  }\n\n  getBookedOutDates() {\n    const offDaysArr = [];\n    const { bookings } = this.props.rental;\n\n    if (bookings && bookings.length > 0) {\n      bookings.forEach(booking => {\n        const bookedInterval = getRangeOfDates(booking.startAt, booking.endAt);\n        offDaysArr.push(...bookedInterval);\n      });\n    }\n    return offDaysArr;\n  }\n  checkInvalidDate(date) {\n    return (\n      this.bookedOutDates.includes(date.format(\"DD/MM/Y\")) ||\n      date.diff(moment(), \"days\") < 0\n    );\n  }\n\n  handleApply(event, picker) {\n    //prevent saving date as a previous day in a database by applying utc to date in a string form\n    const sStartDate = picker.startDate.format(\"DD/MM/Y\");\n    const sEndDate = picker.endDate.format(\"DD/MM/Y\");\n    const startAt = dateToUTC(sStartDate);\n    const endAt = dateToUTC(sEndDate);\n\n    this.dateRef.current.value = `${sStartDate} to ${sEndDate}`;\n\n    this.setState({ startAt, endAt });\n  }\n\n  addGuests(event) {\n    this.setState({ guests: parseInt(event.target.value, 10) });\n  }\n  confirmReservation() {\n    this.setState({ openModal: true });\n  }\n  closeConfirmation() {\n    this.setState({ openModal: false });\n    this.resetData();\n  }\n  resetData() {\n    this.dateRef.current.value = \"\";\n    this.setState({ starttAt: \"\", endAt: \"\", guests: \"\" });\n  }\n  onSuccessfulBooking() {\n    const { startAt, endAt } = this.state;\n    const bookedInterval = getRangeOfDates(startAt, endAt);\n    this.bookedOutDates.push(...bookedInterval);\n    this.closeConfirmation();\n    toast.success(\"Booking has been successfuly created!\");\n  }\n\n  render() {\n    const { rental, isAuth } = this.props;\n    const { startAt, endAt, guests, openModal } = this.state;\n    const days = getRangeOfDates(startAt, endAt).length - 1;\n    const totalPrice = rental.dailyRate * days;\n    return (\n      <div className=\"booking\">\n        <ToastContainer />\n        <h3 className=\"booking-price\">\n          $ {rental.dailyRate}\n          <span className=\"booking-per-night\">per night</span>\n        </h3>\n        <hr />\n        {!isAuth && (\n          <Link\n            className=\"btn btn-bwm btn-confirm btn-block\"\n            to={{ pathname: \"/login\" }}\n          >\n            Login to book a place\n          </Link>\n        )}\n        {isAuth && (\n          <React.Fragment>\n            <div className=\"form-group\">\n              <label htmlFor=\"dates\">Dates</label>\n              <DateRangePicker\n                onApply={this.handleApply}\n                isInvalidDate={this.checkInvalidDate}\n                opens=\"left\"\n                containerStyles={{ display: \"block\" }}\n              >\n                <input\n                  ref={this.dateRef}\n                  id=\"dates\"\n                  type=\"text\"\n                  className=\"form-control\"\n                />\n              </DateRangePicker>\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"guests\">Guests</label>\n              <input\n                onChange={event => this.addGuests(event)}\n                value={this.state.guests}\n                type=\"number\"\n                className=\"form-control\"\n                id=\"guests\"\n                aria-describedby=\"emailHelp\"\n                placeholder=\"\"\n              />\n            </div>\n            <button\n              disabled={!startAt || !endAt || !guests}\n              onClick={() => this.confirmReservation()}\n              className=\"btn btn-bwm btn-confirm btn-block\"\n            >\n              Reserve place now\n            </button>\n          </React.Fragment>\n        )}\n        <hr />\n        <p className=\"booking-note-title\">\n          People are interested into this house\n        </p>\n        <p className=\"booking-note-text\">\n          More than 500 people checked this rental in last month.\n        </p>\n        <BookingModal\n          startAt={startAt}\n          endAt={endAt}\n          days={days}\n          guests={guests}\n          dailyRate={rental.dailyRate}\n          totalPrice={totalPrice}\n          rentalId={rental._id}\n          open={openModal}\n          closeModal={this.closeConfirmation}\n          onBooked={this.onSuccessfulBooking}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    rental: state.rental.data,\n    isAuth: state.auth.isAuth\n  };\n};\nexport default connect(mapStateToProps)(Booking);\n"]},"metadata":{},"sourceType":"module"}